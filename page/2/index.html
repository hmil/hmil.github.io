<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="google-site-verification" content="XEkaOnI5YgD6GPlLusy7Z7U91v35YU9Q0eX1KslsVoQ" />
  

  
  <title>hmil&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="hmil&#39;s blog">
<meta property="og:url" content="https://hmil.github.io/page/2/index.html">
<meta property="og:site_name" content="hmil&#39;s blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hmil&#39;s blog">
  
    <link rel="alternate" href="/atom.xml" title="hmil&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">hmil&#39;s blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">random tech write-ups</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://hmil.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-How-not-to-suck-at-github" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/How-not-to-suck-at-github/" class="article-date">
  <time datetime="2018-05-28T20:00:00.000Z" itemprop="datePublished">2018-05-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/software-engineering/">software engineering</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/How-not-to-suck-at-github/">How not to suck at GitHub</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>So you learned a bit of programming and you know how to use git. You are ready to materialize your thoughts through the mighty power of code, and make your art available to the whole world using the most popular open source social network on earth.</p>
<p>But you fear that you will make stupid mistakes and ruin your chance to become the next tech influencer. Rest assured, after reading this post you will know everything you need to know to make the most of Octocat’s home.</p>
<p>I will give you 10 tips to make it to the top faster than <a href="https://en.wikipedia.org/wiki/Pemba_Dorje" target="_blank" rel="noopener">Pemba Dorje</a> on oxygen!</p>
<h2 id="1-Don’t-look-for-alternatives"><a href="#1-Don’t-look-for-alternatives" class="headerlink" title="1. Don’t look for alternatives"></a>1. Don’t look for alternatives</h2><p>If you think of a novel utility, library or a plug-in, you need to start coding your own solution straight away.</p>
<p>You will only lose time looking for alternatives. You will find that prior art does not quite fit your requirements. Of course, you can not bend your problem definition, even sligthly, so that existing solutions apply. Moreover, during this process you may taint your original idea by looking at too many similar concepts, which will invariably worsen your design.</p>
<p>It would also be a huge waste of time trying to add a feature to an existing project. The legacy codebase of established projects is massive and messy. Just learning the relevant bits would take as much time as coding the whole solution from scratch anyway. And I’m not even talking about the near-infinite number of hours of work lost in feature requests which end up being rejected by the project owner after 3 months of silence.</p>
<h2 id="2-Google-and-StackOverflow-won’t-help-you"><a href="#2-Google-and-StackOverflow-won’t-help-you" class="headerlink" title="2. Google and StackOverflow won’t help you"></a>2. Google and StackOverflow won’t help you</h2><p>Don’t waste your precious time googling for a solution. Most of the answers on StackOverflow are garbage anyway, and the library you are working with (and which is the root cause of your current issue of course) is not that popular. Hence, chances of finding the exact solution to your problem online are minimal.</p>
<p>Instead, you better bother that project maintainer whose lack of QA considerations is causing your troubles. The project maintainer has the mental map of his project engraved in his memory at all times and can therefore figure out the solution to any problem near instantly. Plus, I suspect projet maintainers keep a secret list of known issues which they do not fix out of pure laziness, and that they actually wait until someone notices it to fix it.</p>
<h2 id="3-Don’t-try-to-fix-it-yourself"><a href="#3-Don’t-try-to-fix-it-yourself" class="headerlink" title="3. Don’t try to fix it yourself"></a>3. Don’t try to fix it yourself</h2><p>This tip is similar to number 2. If a project you are using doesn’t work, it’s probably the maintainer’s fault. Don’t even bother looking for an answer in the project wiki or investigating the bug yourself. Just go ahead and nag the project maintainer. He or she will probably be able to fix their buggy project just for you.<br>Don’t forget to check back each day and notify the maintainer if he forgot to respond to your last message.</p>
<h2 id="4-Be-as-vague-as-possible"><a href="#4-Be-as-vague-as-possible" class="headerlink" title="4. Be as vague as possible"></a>4. Be as vague as possible</h2><p>When you open an issue for a bug you’ve encountered (which should be about 2 minutes after you’ve noticed said bug if you follow the advice above), please do yourself a favor and describe your issue in as vague terms as possible. Don’t try to assess the cause of your problem. This way you avoid making a bad diagnosis and mislead the maintainer. Also, don’t post a snippet of your own code, system stats or installed libraries as it may leak sensitive information out to the public (remember hackers are constantly scraping GitHub for sensitive information!).</p>
<h2 id="5-Don’t-bother-with-the-markup"><a href="#5-Don’t-bother-with-the-markup" class="headerlink" title="5. Don’t bother with the markup"></a>5. Don’t bother with the markup</h2><p>You’ve heard about <a href="https://en.wikipedia.org/wiki/Markdown#Example" target="_blank" rel="noopener">markdown</a> but for your own sake, you couldn’t remember how to format code. Is it a &lt;code&gt; tag? Or maybe [code]? Or is it a back tick? Damn it!</p>
<p>Don’t worry, no one does. Just forget about formatting your issue altogether. Paste large blobs of code inline with your prose like you’re writing lyrics for the next trap banger. After all, if the maintainer is not happy with your format, he can copy and paste it to a text editor.<br>As a bonus, you don’t even need to indent your code when you proceed this way!</p>
<h2 id="6-Refrain-from-using-reactions"><a href="#6-Refrain-from-using-reactions" class="headerlink" title="6. Refrain from using reactions"></a>6. Refrain from using reactions</h2><p>It is outrageous that the GitHub team spent so much effort mimicking facebook with its stupid “reactions”. Ugh… Anyway, when you feel like you agree (or even disagree) with a comment, be respectful and post an additional comment to voice your opinion while adding absolutely no useful piece of information to the debate. And please, please, please, leave that stupid “thumbs up” button for social-network addicted kids.</p>
<h2 id="7-DO-NOT-ever-submit-a-pull-request"><a href="#7-DO-NOT-ever-submit-a-pull-request" class="headerlink" title="7. DO NOT, ever, submit a pull request"></a>7. DO NOT, ever, submit a pull request</h2><p>Everyone knows project maintainers hate it when someone tries to touch their code. After all, why are they constantly finding excuses to reject pull requests?<br>Also, in order to preserve your ever so precious time, and avoid a painful public shaming, do not attempt to contribute code to an open source project.</p>
<h2 id="8-If-you-ever-should-submit-code-don’t-ask"><a href="#8-If-you-ever-should-submit-code-don’t-ask" class="headerlink" title="8. If you ever should submit code, don’t ask!"></a>8. If you ever should submit code, don’t ask!</h2><p>Let’s say there is this extremely useful feature you need, and the project seems a bit inactive lately. You <strong>really</strong> crave that feature and you can’t wait for Mr. slowpoke to code it himself. Despite point 1, you do not have time to write new software from scratch. You realize that it will be a substantial change which will require quite a bit of code, but nothing can discourage you. You <strong>need</strong> that feature.</p>
<p>Then make sure to secretly develop the feature without letting the maintainer know; otherwise, he or she might try to cut the grass under your feet. Don’t let anyone know you are working on this awesome addition until the very last moment when you submit your huge pull request as a single, solid, code change. <em>Wow</em> factor guaranteed!</p>
<h2 id="9-Do-not-answer-other-people’s-questions"><a href="#9-Do-not-answer-other-people’s-questions" class="headerlink" title="9. Do not answer other people’s questions"></a>9. Do not answer other people’s questions</h2><p>As you contribute to repositories, you will notice other people try to drown your hard work under a deluge of irrelevant issues and comments. Don’t think helping them will make them go away; they will invariably come back with more.</p>
<p>Instead, keep a cool head and refrain from helping. If needed, “up” your own issue to make sure it stays on top.</p>
<h2 id="10-Use-issues-as-a-general-purpose-Q-amp-A-place"><a href="#10-Use-issues-as-a-general-purpose-Q-amp-A-place" class="headerlink" title="10. Use issues as a general purpose Q&amp;A place"></a>10. Use issues as a general purpose Q&amp;A place</h2><p>As we’ve covered in point number 2, you will not find answers on StackOverflow. What’s more, its elevator system tends to reorder comments in an annoying way which breaks chronological order.  </p>
<p>Therefore, if you have anything to say which is even remotely connected to a project, then go ahead and express yourself using the issues section. This will notify <strong>everyone</strong> who watches the repository and guarantee maximum exposure of your comment.</p>
<hr>
<p>Hope you liked these tips. Please feel free to contribute your own in the comments!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hmil.github.io/2018/05/How-not-to-suck-at-github/" data-id="ck7t2z62h000h4nxoid3a5b31" class="article-share-link">Share</a>
      
        <a href="https://hmil.github.io/2018/05/How-not-to-suck-at-github/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GitHub/">GitHub</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rant/">rant</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-TypeScript-project-structure2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/TypeScript-project-structure2/" class="article-date">
  <time datetime="2018-05-14T15:00:00.000Z" itemprop="datePublished">2018-05-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/software-engineering/">software engineering</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/TypeScript-project-structure2/">How to manage and publish a multi-package TypeScript project</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In the <a href="/2018/03/TypeScript-project-structure/">previous part</a>, we’ve seen a few tricks which can help you split your TypeScript project into small packages. We were still missing a proper build system as well as a way to publish or deploy the packages. Which is what we will cover in this chapter.</p>
<h2 id="To-follow-along"><a href="#To-follow-along" class="headerlink" title="To follow along"></a>To follow along</h2><p>As in the previous part, I have created a simple repository which you can use to follow along this tutorial. This time however, you must first run a script to customize the project before you can start using the repository. The reason is that at the end of this tutorial, you will be able to publish your project to npm. In order to make this work for everyone, we have to rename the packages with a prefix which is unique to each reader of this tutorial. Don’t worry, it only takes a second:</p>
<ol>
<li>Download the archive <a href="https://github.com/hmil/ts-seed-project/archive/part2.zip" target="_blank" rel="noopener">for part 2</a>, and unzip it somewhere.</li>
<li>If you haven’t already, <a href="https://www.npmjs.com/signup" target="_blank" rel="noopener">sign up</a> to npm and <a href="https://docs.npmjs.com/cli/adduser" target="_blank" rel="noopener">log in</a> using the command line. Or, if you don’t care about publishing to npm, go straight to <em>4</em>.</li>
<li>In the project, run <code>./customize.sh</code>. If it worked, you can skip step 4.</li>
<li>Otherwise, run the script like so: <code>./customize.sh username</code>, where <em>username</em> is any username you picked. Beware that you will not be able to publish the packages. </li>
</ol>
<p>Alternatively, if you do not wish to download the files, you can read the <a href="https://github.com/hmil/ts-seed-project/compare/part1...part2" target="_blank" rel="noopener">diff on github</a>.</p>
<h2 id="Build-system"><a href="#Build-system" class="headerlink" title="Build system"></a>Build system</h2><p>You may have noticed a new file called <code>Makefile</code> at the top of the project. Indeed, we use <a href="https://www.gnu.org/software/make/" target="_blank" rel="noopener">GNU Make</a> to keep track of dependencies between packages and to define build tasks, and this file is where we tell <em>Make</em> what to do. If you do happen to know a better alternative than <em>Make</em>, please express yourself in the comments.</p>
<p><em>Make</em> is installed by default on any decent operating system. If you are using windows, you can easily find instructions online to install it.  </p>
<p>The top-level Makefile defines three things: </p>
<ul>
<li>global tasks</li>
<li>dependencies</li>
<li>utility tasks</li>
</ul>
<h3 id="Global-tasks"><a href="#Global-tasks" class="headerlink" title="Global tasks"></a>Global tasks</h3><p>Global tasks are tasks which must run in all packages. They are defined in this line:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TASKS :=build clean test</span><br></pre></td></tr></table></figure>
<p>For instance, the <code>build</code> task will build all packages at once. To run it, type:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make build</span><br></pre></td></tr></table></figure>
<p>You will notice that this command also installs npm dependencies, and that it builds the packages in the correct order! Make did not <em>magically</em> figure this out, <em>we</em> instructed it to do so. Keep reading to find out how.</p>
<h3 id="Dependencies"><a href="#Dependencies" class="headerlink" title="Dependencies"></a>Dependencies</h3><p>Dependency declaration is the easiest and most useful thing with <em>Make</em>. Simply write the path to the dependent, followed by a colon, followed by a space-separated list of dependencies.<br>For instance, the dependencies between our packages are defined like so:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">packages/tstuto-api:</span></span><br><span class="line"><span class="section">packages/tstuto-server: packages/tstuto-api</span></span><br><span class="line"><span class="section">packages/tstuto-web-client: packages/tstuto-api</span></span><br></pre></td></tr></table></figure>
<p>This is how Make knows in which order to build our packages. But how does it know to install npm dependencies first?</p>
<p>Open the Makefile in <code>tstuto-web-client</code>, which looks something like this:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">BIN=public/dist/main.js</span><br><span class="line">SRC =<span class="variable">$(<span class="built_in">shell</span> find src/ -type f -name '*.ts')</span></span><br><span class="line">NODE_MODULES=node_modules/.makets</span><br><span class="line">NPM_TASKS=test clean</span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="meta-keyword">.PHONY</span>: build</span></span><br><span class="line"><span class="section">build: <span class="variable">$(BIN)</span></span></span><br><span class="line"></span><br><span class="line"><span class="variable">$(NODE_MODULES)</span>: package.json package-lock.json</span><br><span class="line">	npm install</span><br><span class="line">	touch <span class="variable">$(NODE_MODULES)</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$(BIN)</span>: <span class="variable">$(NODE_MODULES)</span> <span class="variable">$(SRC)</span></span><br><span class="line">	npm run build</span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="meta-keyword">.PHONY</span>: $(NPM_TASKS)</span></span><br><span class="line"><span class="variable">$(NPM_TASKS)</span>: <span class="variable">$(NODE_MODULES)</span></span><br><span class="line">	npm run <span class="variable">$@</span></span><br></pre></td></tr></table></figure>
<p>The <code>BIN</code> variable contains the path to the output file of our package (in this case, it is the client-side javascript bundle).<br>We create a special file inside the node_modules directory, called <code>.makets</code> (which stands for <em>make TimeStamp</em>). This file records the last time that make ran <code>npm install</code> and helps it figure out if it should run the command again (that is, when either <code>package.json</code> or <code>package-lock.json</code> has changed).</p>
<p>Some tasks are defined in the <em>script</em> property of the <code>package.json</code> and do not need any additional logic in the Makefile. We define those in the <em>NPM_TASKS</em> variable which is used to run the npm script of the same name.</p>
<h3 id="Utility-tasks"><a href="#Utility-tasks" class="headerlink" title="Utility tasks"></a>Utility tasks</h3><p>Let’s go back to the top-level Makefile quickly to talk about utility tasks.</p>
<p>You might encounter repetitive tasks which are specific to one package and cannot be generalized to all packages. For instance, we want a task to start our development server. Such tasks can be defined individually in the top-level Makefile like so:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><span class="meta-keyword">.PHONY</span>: serve</span></span><br><span class="line"><span class="section">serve:</span></span><br><span class="line">	<span class="variable">$(MAKE)</span> build</span><br><span class="line">	<span class="variable">$(MAKE)</span> -C packages/tstuto-server serve</span><br></pre></td></tr></table></figure>
<p>Here we simply create a proxy-task which delegates to the makefile located in <code>packages/tstuto-server</code>. </p>
<!-- You may be wondering why this task explicitly invokes `make build` instead of defining a dependency on `build`. That is where we reach the limits of Make. Simply put, we cannot depend on global tasks because we used a hack to declare them. The hack itself is at the end of the Makefile but it is not worth discussing in this tutorial.
-->
<hr>
<p>That is about it for the build system. If you are familiar with Make, nothing should have surprised you in the above (except maybe the way we declare the dependencies for <code>npm install</code>). Otherwise, the syntax might look daunting at first, but you’ll quickly get used to it.</p>
<p>Without further ado, let’s see how we solve the last remaining problem: <strong>publishing</strong>.</p>
<h2 id="Publishing-Deployment"><a href="#Publishing-Deployment" class="headerlink" title="Publishing/Deployment"></a>Publishing/Deployment</h2><p>The setup we have right now is great for development, but you may be wondering: “How do I deploy this to production?” or “How do I publish this as npm packages?”. Fear not, the answer lies right below!</p>
<p>You could of course clone your whole repository to your production environment and run <code>make serve</code>. That would work but it would also be quite unprofessional to proceed this way.</p>
<p>A more idiomatic way to proceed is to publish your packages to an <strong>artifact repository</strong>. Open source projects usually rely on npm’s public repository while proprietary software editors have their own private artifact servers. Luckily for us, this means that no matter what you are currently trying to do, whether it’s an open or closed source, whether it’s a library, a microservice or a CLI tool, the process to publish it is exactly the same!</p>
<p>Let’s recap what we want to do before digging into the details: We want to take all of our packages, give them appropriate version numbers and publish them using npm.<br>Oh, and one more detail: When they get published, our packages need to declare their dependencies to sibling packages in our project (because within the artifact repository, each package stands alone).</p>
<p>All the magic happens inside <code>tools/publish.ts</code>. This script does the following:</p>
<ul>
<li>Determines the next version number</li>
<li>Changes all <code>package.json</code> files of all packages to set the correct version number</li>
<li>Adds the missing dependencies to each <code>package.json</code></li>
<li>Performs a <code>npm publish</code></li>
<li>Rolls back the changes made in the <code>package.json</code> files</li>
</ul>
<p>I will not dive into the details of this script and I would not advise you to reuse it as-is for your own projects. Instead, you should try it out and understand how it works so you can apply this knowledge to your specific use-case.</p>
<p>We call this script from the <code>Makefile</code>. Run it with the following command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make publish</span><br></pre></td></tr></table></figure>
<p><strong>If you are currently logged into npm, this will effectively publish the demo package to <code>@username/tstuto-xxx</code>.</strong></p>
<p>You can now test your newly-deployed package by running:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @username/tstuto-server</span><br></pre></td></tr></table></figure>
<p>(Make sure to replace <em>username</em> with your actual npm username. You may need to run this command with <code>sudo</code>).</p>
<p>And then, start your server by running:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my-awesome-app</span><br></pre></td></tr></table></figure>
<p>This should start the application.</p>
<hr>
<p>Well done! If you made it so far, you now know the key elements to manage a multi-package TypeScript project, develop it and publish it (or ship it for production).</p>
<h2 id="Bonus"><a href="#Bonus" class="headerlink" title="Bonus"></a>Bonus</h2><p><code>Make</code> can run multiple tasks in parallel in a way that is consistent with the dependencies declared in the makefile. For instance, to run up to 4 tasks in parallel, run <code>make -j4 build</code>. This can help you speed up builds when you have many packages and a flat dependency tree.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hmil.github.io/2018/05/TypeScript-project-structure2/" data-id="ck7t2z62k000n4nxokewzdamr" class="article-share-link">Share</a>
      
        <a href="https://hmil.github.io/2018/05/TypeScript-project-structure2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TypeScript/">TypeScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/architecture/">architecture</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/monorepo/">monorepo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-TypeScript-project-structure" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/TypeScript-project-structure/" class="article-date">
  <time datetime="2018-03-26T15:00:00.000Z" itemprop="datePublished">2018-03-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/software-engineering/">software engineering</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/TypeScript-project-structure/">Tips and tricks to structure multi-package TypeScript projects</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I’ve been experimenting with ways to structure a complex TypeScript project lately while working on <a href="https://github.com/lbarman/vaultage" target="_blank" rel="noopener">Vaultage</a> and I have finally found a solution that provides proper isolation and consistency across packages.</p>
<p>Java developers should be familiar with having dozens of sub-projects open simultaneously in their IDE, each with its own build target and dependencies.</p>
<p>In comparison, JavaScript projects tend to be a mess because of the lack of an idiomatic way to split code across packages. Tools like <a href="https://github.com/lerna/lerna" target="_blank" rel="noopener">lerna</a> help you create a proper JavaScript monorepo and rationalize the development of a complex project. However these tools pack a lot of features which take some time to properly master. The added complexity may result in misunderstanding and in the end the time gained by deploying the tool may be lost in obscure debugging sessions. Additionally, TypeScript is a different beast and requires more work to integrate properly.</p>
<p>In this tutorial, you will learn the basic principles behind a multi-package TypeScript project so you can apply them in your own work.</p>
<p>I created a minimalist project skeleton so you can follow along this tutorial. You can download it <a href="https://github.com/hmil/ts-seed-project/archive/part1.zip" target="_blank" rel="noopener">here</a>.</p>
<h2 id="The-setup"><a href="#The-setup" class="headerlink" title="The setup"></a>The setup</h2><p>Download and unpack the <a href="https://github.com/hmil/ts-seed-project/archive/part1.zip" target="_blank" rel="noopener">tutorial files</a> into your workspace. You should end up with a project containing a <code>packages</code> sub-folder with three packages inside.<br>Each package is an independent unit of code, with its own build target and test suite:</p>
<ul>
<li>The <code>tstuto-server</code> package contains the NodeJS server files</li>
<li>The <code>tstuto-web-client</code> package contains the web application which talks to the server</li>
<li>The <code>tstuto-api</code> package contains shared definitions which the client and server will use to communicate in a type-safe way.</li>
</ul>
<p>As you may have guessed, our example application consists of a simple web server and a web application which talk over HTTP.</p>
<p>Go ahead and open the top-level folder in your favorite TypeScript IDE (it should be <a href="https://code.visualstudio.com/" target="_blank" rel="noopener">VSCode</a>, if it’s not, then go ahead and download it now, I’ll wait…).</p>
<p>First, you’ll want to check that everything works as intended. Navigate to <code>packages/tstuto-web-client</code> and run:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure>
<p>Then <strong>repeat this step for the <code>tstuto-server</code> package</strong>.</p>
<p>When you are done, you should have successfully built the demo application. Navigate to the <code>tstuto-server</code> package and run <code>npm start</code> to launch the server. Then, point your web browser at <code>http://localhost:3000</code>. You should see an ugly web page with a button.</p>
<h2 id="Using-a-shared-package"><a href="#Using-a-shared-package" class="headerlink" title="Using a shared package"></a>Using a shared package</h2><p>Take a look at the files <code>packages/tstuto-server/src/controllers/MoodController.ts</code>, and <code>packages/tstuto-web-client/src/main-client.ts</code>.</p>
<p>The client uses the <a href="https://github.com/axios/axios" target="_blank" rel="noopener">axios</a> library to fetch a mood from the server over HTTP. If you are a type safety freak, something should tickle your senses here: the communication is not safe. Indeed, look at the type returned by the <code>axios</code> call in <code>main-client.ts</code>: you’ll find that it is of the <code>any</code> type. You can use this object however you want and the TypeScript compiler will never complain, even though your code might crash at run-time!</p>
<p><img src="/assets/ts-structure-tuto/untyped-response.gif" alt="An untyped response lets you type anything and provides no intellisense"></p>
<p>Enter the <code>tstuto-api</code> package. Take a look at <code>packages/tstuto-api/src/index.ts</code>, we define a type and two factory functions there. <strong>Compile them</strong> by navigating to <code>packages/tstuto-api</code> and running <code>npm install &amp;&amp; npm run build</code>.</p>
<p>Now, going back to <code>MoodController.ts</code>, <strong>replace the function by the following</strong>, which uses the factory methods instead of the inline object definitions:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; happyMood, sadMood &#125; <span class="keyword">from</span> <span class="string">'../../../tstuto-api/src/index'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> express <span class="keyword">from</span> <span class="string">'express'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> HAPPY_THRESHOLD = <span class="number">0.3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">MoodController</span>(<span class="params">_req: express.Request, res: express.Response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> indicator = <span class="built_in">Math</span>.random();</span><br><span class="line">    <span class="keyword">if</span> (indicator &gt; HAPPY_THRESHOLD) &#123;</span><br><span class="line">        res.json(happyMood(indicator));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.json(sadMood(indicator));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In <code>main-client.ts</code>, use the interface to type the object returned by axios:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; IMoodAPIResponse &#125; <span class="keyword">from</span> <span class="string">'../../tstuto-api/src/index'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ... */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// line 23:</span></span><br><span class="line"><span class="keyword">const</span> mood = <span class="keyword">await</span> axios.get&lt;IMoodAPIResponse&gt;(<span class="string">'/api/mood'</span>);</span><br></pre></td></tr></table></figure>
<p>That is way better, our API is now type-safe. The TypeScript compiler catches typos, and we have proper auto-completion and code refactoring!</p>
<p><img src="/assets/ts-structure-tuto/typed-response.gif" alt="A typed response provides completion and catches typos"></p>
<p>However, written as is, our import statement actually instructs the TypeScript compiler to compile the target module along with ours. This has multiple nasty side effects and defeats the point of having separate modules altogether.</p>
<p>It would be much cleaner if we could just write:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; IMoodAPIResponse &#125; <span class="keyword">from</span> <span class="string">'tstuto-api'</span>;</span><br></pre></td></tr></table></figure>
<p>We will see how we can achieve this in the next section.</p>
<h2 id="Proper-code-sharing"><a href="#Proper-code-sharing" class="headerlink" title="Proper code sharing"></a>Proper code sharing</h2><p>So far, we’ve split our code into three modules and used import statements to borrow code from one module into another. However, we would like to isolate the modules further and import the built artifact rather than importing the raw source code. This means that we want the TypeScript compiler to use the type definitions emitted during compilation and we want node (or webpack for the client) to import the generated JavaScript file rather than the source TypeScript. This helps us avoid bugs spreading across modules and prevents careless developers from producing spaghetti code (to some extent…). It will also <strong>speed up your builds</strong> because <code>tsc</code> won’t have to compile the same source files over and over.</p>
<p>Go ahead and replace the two imports looking like <code>import xxx from &#39;../../api/src/index&#39;</code> in <code>main-client.ts</code> and <code>MoodController.ts</code> with just <code>import xxx from &#39;api&#39;</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main-client.ts:</span></span><br><span class="line"><span class="keyword">import</span> &#123; IMoodAPIResponse &#125; <span class="keyword">from</span> <span class="string">'tstuto-api'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MoodController.ts:</span></span><br><span class="line"><span class="keyword">import</span> &#123; happyMood, sadMood &#125; <span class="keyword">from</span> <span class="string">'tstuto-api'</span>;</span><br></pre></td></tr></table></figure>
<p>Don’t worry about the compiler error. All we need to do to make it disappear is instruct the TypeScript compiler to look for our custom packages in the <code>packages</code> folder. Fortunately, there is an option called <code>baseUrl</code> which allows us to do just that.</p>
<p>Edit <code>tsconfig.json</code> at the root of the project and uncomment the line <code>&quot;baseUrl&quot;: &quot;packages&quot;</code>. This way the TypeScript compiler also looks at the <code>packages</code> directory to resolve package names. </p>
<blockquote>
<p>Note 1: Your packages may conflict with packages installed in <code>node_modules</code>; this is why we prefixed all our packages with <code>tstuto-</code>: to make sure that we don’t accidentally shadow an actual npm package. </p>
</blockquote>
<blockquote>
<p>Note 2: You may need to reload your editor after you changed <code>tsconfig.json</code>. In VSCode, open the command palette (CTRL+SHIFT+P) and chose “reload window”.</p>
</blockquote>
<p>There is one more thing we need to do in order for this to work. TypeScript will not recognize your custom module unless you specified the <code>type</code> property in its <code>package.json</code>. Open <code>packages/tstuto-api/package.json</code>. You will see a line with the text “TODO”. Replace it with the following:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"types"</span>: <span class="string">"dist/index.d.ts"</span></span><br></pre></td></tr></table></figure>
<p><strong>You want to make extra sure that you got this setting right</strong>. If there is an error here, nobody will let you know, your imports might resolve to <code>any</code> and you won’t notice your mistake until it’s too late. <strong>The <code>types</code> property in package.json must point to the type definition of your entry point!</strong></p>
<p>Now if you go back to <code>packages/tstuto-server</code> and run <code>npm run build</code>, you should get a successful build. However, if you try to start the server with <code>npm run start</code>, it will fail. Why? Although the TS compiler has figured out your project structure, Node.js is still oblivious to it: it doesn’t know where to find your custom modules at run time!</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ npm start</span><br><span class="line"></span><br><span class="line">&gt; tstuto-server@0.0.0 start /workspace/ts-project-seed/packages/tstuto-server</span><br><span class="line">&gt; node bin/server.js</span><br><span class="line"></span><br><span class="line">module.js:540</span><br><span class="line">    throw err;</span><br><span class="line">    ^</span><br><span class="line"></span><br><span class="line">Error: Cannot find module <span class="string">'tstuto-api'</span></span><br><span class="line">    at Function.Module._resolveFilename (module.js:538:15)</span><br><span class="line">    at Function.Module._load (module.js:468:25)</span><br><span class="line">    at Module.require (module.js:587:17)</span><br><span class="line">    at require (internal/module.js:11:18)</span><br><span class="line">    at Object.&lt;anonymous&gt; (/workspace/ts-project-seed/packages/tstuto-server/dist/src/controllers/MoodController.js:3:20)</span><br><span class="line">    at Module._compile (module.js:643:30)</span><br><span class="line">    at Object.Module._extensions..js (module.js:654:10)</span><br><span class="line">    at Module.load (module.js:556:32)</span><br><span class="line">    at tryModuleLoad (module.js:499:12)</span><br><span class="line">    at Function.Module._load (module.js:491:3)</span><br></pre></td></tr></table></figure>
<p>The next trick we will use is called <code>NODE_PATH</code>.</p>
<p><code>NODE_PATH</code> is an environment variable node uses for pretty much the same purpose TypeScript uses “baseUrl”: it looks for additional <code>node_modules</code> inside the directory specified by <code>NODE_PATH</code>. The problem is that hacks based on environment variables tend to work poorly cross-platform. That’s why we will use <code>cross-env</code>, a nifty node module that lets you define environment variables in a portable way.</p>
<p>In <code>packages/tstuto-server/package.json</code>, replace the line <code>&quot;start&quot;: &quot;node bin/server.js&quot;,</code> with <code>&quot;start&quot;: &quot;cross-env NODE_PATH=.. node bin/server.js&quot;,</code>.</p>
<p>Now, when you run <code>npm start</code>, node will also look at the parent directory when resolving modules. This is how it will know that <code>tstuto-api</code> refers to your custom module in <code>packages/tstuto-api</code>.</p>
<p>Your application should now work properly!</p>
<h1 id="Next-steps"><a href="#Next-steps" class="headerlink" title="Next steps"></a>Next steps</h1><p>You have learned the fundamental tricks which will allow you to structure a multi-package typescript project. There are things left to fix though.  </p>
<ol>
<li>It is tedious to go into each sub-project and manually run <code>npm run build</code> each time we change something. In addition, if we add more modules, manually tracking dependencies can quickly become a nightmare. That’s why we need a <strong>build and dependency tracking system</strong> to handle all of that for us.</li>
<li>We would like to <strong>export our project</strong>, either to be distributed as an npm module or to be deployed somewhere. We can not ship our packages as separate npm packages just like that because they now depend on the directory structure of the repository.</li>
</ol>
<p><strong>See you in the <a href="/2018/05/TypeScript-project-structure2/">next part of this tutorial</a>, where we discuss those issues.</strong> </p>
<hr>
<h1 id="Appendix-How-did-you-serve-the-client-files-again"><a href="#Appendix-How-did-you-serve-the-client-files-again" class="headerlink" title="Appendix: How did you serve the client files again?"></a>Appendix: How did you serve the client files again?</h1><p>You may have noticed that our server also takes care to serve the client (as static files). While there are scenarios where you will want to ship the client separately, serving it from the API server is quite handy for development and suits a broad range of practical use-cases.</p>
<p>The trick fits into these three lines of code:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Bind static content to server</span></span><br><span class="line"><span class="keyword">const</span> pathToWebUI = path.dirname(<span class="built_in">require</span>.resolve(<span class="string">'../../../tstuto-web-client'</span>));</span><br><span class="line"><span class="keyword">const</span> staticDirToServer = path.join(pathToWebUI, <span class="string">'public'</span>);</span><br><span class="line">server.use(express.static(staticDirToServer));</span><br></pre></td></tr></table></figure>
<p>We get the absolute path to the <code>tstuto-web-client</code> module and concatenate the <code>public</code> directory to it; we then instruct express to serve this folder as static content. Doing it this way allows us to keep the server and client completely separated and avoid any copy which would make our build system much more complex.</p>
<p><strong>You should use the module name <code>&#39;tstuto-web-client&#39;</code> instead of the relative path <code>&#39;../../../tstuto-web-client&#39;</code> now that you have learned the NODE_PATH trick.</strong> The reason the tutorial files ship with the relative path is to make it work as-is (even if you don’t set NODE_PATH), but this will break when you’ll try to deploy the app in the next part.</p>
<hr>
<p><em>Thanks <a href="https://lbarman.ch/" target="_blank" rel="noopener">Ludovic</a> for proofreading this tutorial.</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hmil.github.io/2018/03/TypeScript-project-structure/" data-id="ck7t2z62j000l4nxowtqlg6ni" class="article-share-link">Share</a>
      
        <a href="https://hmil.github.io/2018/03/TypeScript-project-structure/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TypeScript/">TypeScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/architecture/">architecture</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/monorepo/">monorepo</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/IoT/">IoT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/archived/">archived</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hacking/">hacking</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/random/">random</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/software-engineering/">software engineering</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular/" style="font-size: 10px;">Angular</a> <a href="/tags/ESP8266/" style="font-size: 15px;">ESP8266</a> <a href="/tags/GitHub/" style="font-size: 10px;">GitHub</a> <a href="/tags/IoT/" style="font-size: 15px;">IoT</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Svelte/" style="font-size: 10px;">Svelte</a> <a href="/tags/TypeScript/" style="font-size: 20px;">TypeScript</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/android/" style="font-size: 10px;">android</a> <a href="/tags/architecture/" style="font-size: 15px;">architecture</a> <a href="/tags/arduino/" style="font-size: 15px;">arduino</a> <a href="/tags/embedded/" style="font-size: 10px;">embedded</a> <a href="/tags/funrun/" style="font-size: 10px;">funrun</a> <a href="/tags/funrun2/" style="font-size: 10px;">funrun2</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/hack/" style="font-size: 10px;">hack</a> <a href="/tags/monorepo/" style="font-size: 15px;">monorepo</a> <a href="/tags/nodeMCU/" style="font-size: 15px;">nodeMCU</a> <a href="/tags/rant/" style="font-size: 10px;">rant</a> <a href="/tags/reverse-engineering/" style="font-size: 10px;">reverse engineering</a> <a href="/tags/wifi/" style="font-size: 15px;">wifi</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/09/how-ui-frameworks-grab-control/">How to grab control: 4 tactics used by UI libraries</a>
          </li>
        
          <li>
            <a href="/2020/03/game-of-pong-on-esp8266/">A multiplayer game of pong on the ESP8266</a>
          </li>
        
          <li>
            <a href="/2018/07/ultimate-esp8266-guide/">The definitive ESP8266 getting started guide for programmers</a>
          </li>
        
          <li>
            <a href="/2018/05/How-not-to-suck-at-github/">How not to suck at GitHub</a>
          </li>
        
          <li>
            <a href="/2018/05/TypeScript-project-structure2/">How to manage and publish a multi-package TypeScript project</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Hadrien Milano<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'hmil';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>